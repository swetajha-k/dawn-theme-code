name: Block Shopify JSON Files
 
on:
  pull_request:
  push:
 
jobs:
  block-json:
    runs-on: ubuntu-latest
 
    steps:
      - uses: actions/checkout@v4
 
      - name: Detect forbidden JSON files
        run: |
          forbidden_files=(
            "config/settings_data.json"
            "templates/.*\.json"
          )
 
          for pattern in "${forbidden_files[@]}"; do
            if git diff --name-only HEAD~1 | grep -E "$pattern"; then
              echo "‚ùå Forbidden Shopify JSON file detected: $pattern"
              exit 1
            fi
          done
