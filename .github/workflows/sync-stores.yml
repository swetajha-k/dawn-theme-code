name: Sync StoreA to StoreB (Exclude JSON)
 
on:

  push:

    paths:

      - 'store-dev/**'
 
jobs:

  sync-store:

    runs-on: ubuntu-latest
 
    steps:

      - name: Checkout repository

        uses: actions/checkout@v4

        with:

          fetch-depth: 0
 
      - name: Sync Store-dev to Store-stage (exclude JSON files)

        run: |

          rsync -av --delete \

            --exclude='*.json' \

            stored-dev/ stored-stage/
 
      - name: Check for changes

        run: |

          git status
 
      - name: Commit and push changes

        run: |

          git config user.name "github-actions"

          git config user.email "github-actions@github.com"
 
          git add storeB

          git diff --cached --quiet || git commit -m "Sync Store-dev to Store-stage (excluding JSON)"

          git push

 
